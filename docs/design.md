# 短信注册登陆流程

## 1. 流程

对于客户端（browser，app）而言，使用短信注册和登陆，实际上是同一个快速登陆的接口，并不需要注册接口，主要的实现在于后台流程，如下：

1. 客户端输入手机号，调用`获取验证码`接口
2. 后台接收到请求，生成验证码（规则自定义，通用做法是4到6位数字）
3. 调用短信服务，发送验证码
4. 把手机号和对应的验证码保存到`redis`中，设置超时时间（自定义，通用做法是1分钟）
5. 客户端接收到验证码，调用`快速登陆`接口，把手机号和验证码发送到后台
6. 后台接收到手机号和验证码，与`redis`服务器中的数据进行比对，如果比对通过，则表明登陆成功，反之则返回错误信息，如`验证码过时`
7. 登陆成功，后台查询该手机是否存在，若不存在，则新建一个用户，生成`UID`，若存在，则直接生成`UID`
8. 生成token
9. 客户端获取token，完成整个登陆注册流程，后续调用所有接口都需要带上该token

## 2. 短信服务商

使用[云片网](https://www.yunpian.com/)